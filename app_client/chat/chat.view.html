<main-navigation></main-navigation>
<div class="container-fluid thread-container" id="thread-container">
  <div class="row sub-header">
    <div class="col-xs-12">
      <h3 class="text-center">
        {{ vm.chatName }}
        <span class="pull-right">
          <span uib-dropdown on-toggle="toggled(open)">
            <i class="fa fa-users clickable" id="show-users" ng-click="vm.getUsers()" uib-dropdown-toggle></i>
            <ul uib-dropdown-menu aria-labelledby="show-users" class="header-dropdown">
              <li role="menuitem" class="bold">Participants</li>
              <li role="separator" class="divider"></li>
              <li role="menuitem" ng-repeat="user in vm.chatRoomUsers">
                {{ user }}
              </li>
            </ul>
          </span>
          <i class="fa fa-user-plus clickable" ng-click="vm.emailInvitePopup()"></i>
        </span>
      </h3>
    </div>
  </div>
  <div ng-show="vm.alertMessage" class="alert alert-warning alert-dismissible top-alert" role="alert">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    {{ vm.alertMessage }}
  </div>
  <ul class="row list-group message-thread" id="message-thread-list">
    <li class="col-xs-12 list-group-item" ng-repeat="message in vm.messageThread" ng-class="message.selfClasses">
      <span ng-show="message.showNickname" class="bold">{{ message.username }}: </span><span ng-bind-html='message.content | prettifyMessage'></span>
    </li>
  </ul>
  <message-entry></message-entry>
</div>
